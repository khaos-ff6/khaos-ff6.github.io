<!DOCTYPE html>
<html>
<head>
    <title>VFO Chest Tracker</title>
    <link rel="icon" type="image/png" href="favicon.png" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script type="text/javascript">
        var pageState;

        //
        //
        //  NEEDED ONLY DURING DEV; REMOVE WHEN GOING LIVE
        //
        //
        chestsLength = 219;
        
        function PageState( chestsIn ) {
            this.chests = chestsIn;

            this.initChests = function() {
                this.chests = new Array( 219 ).fill( false );
            }

            if ( chestsIn === undefined ) {
                this.initChests();
            }

            this.initPage = function() {
                for ( var i = 0; i < this.chests.length; i++ ) {
                    var newCheckbox = document.createElement( 'input' );
                    newCheckbox.type = 'checkbox';
                    newCheckbox.id = 'c'+i;
                    newCheckbox.className = 'styledCheckbox';

                    if ( this.chests[i] ) {
                        newCheckbox.checked = true;
                    }
                    else {
                        newCheckbox.checked = false;
                    }

                    newCheckbox.addEventListener(
                        'change',
                        function( evnt ) {
                            checkboxIndex = this.id.substring( 1 );

                            if ( this.checked ) {
                                pageState.chests[checkboxIndex] = true;
                            }
                            else {
                                pageState.chests[checkboxIndex] = false;
                            }
                        },
                        true
                    );
                    document.body.appendChild( newCheckbox );
                }
            }
        }


        function resetPage() {
            if ( confirm( 'Are you sure you want to uncheck ALL chest checkboxes?' ) ) {
                $( 'input:checkbox' ).prop( 'checked', false );
                pageState.initChests();
            }
        }


        function initializePage( evnt ) {
            pageState = JSON.parse( localStorage.getItem( 'pageState' ) );

            if ( pageState ) {
                //
                //
                // NEEDED ONLY DURING DEV; REPLACE WITH COMMENTED CODE ON GO-LIVE
                //
                //
                //// pageState = new PageState( pageState.chests );
                if ( chestsLength != pageState.chests.length ) {
                    pageState = new PageState();
                }
                else {
                    pageState = new PageState( pageState.chests );
                }
            }
            else {
                pageState = new PageState();
            }

            pageState.initPage();
        }


        function savePageState() {
            localStorage.setItem( 'pageState', JSON.stringify( pageState ) );
        }


        window.addEventListener(
            'unload',
            function( evnt ) {
                savePageState();
            }
        );
    </script>

    <style>
        .styledCheckbox {
            appearance: none;
            border: 2px solid white;
	        padding: 12px;
            border-radius: 4px;
            display: inline-block;
        }
        .styledCheckbox:checked {
            background-color: rgba( 200, 200, 200, 0.25 );
        }
        .styledCheckbox:checked:after {
            content: '\2714';
            font-size: 28px;
            position: absolute;
            top: -8px;
            left: 2px;
            color: white;
        }


        body {
            background-color: black;
            background-image: url( images/full-map.jpg );
            background-repeat: no-repeat;
            min-width: 1875px;
            min-height: 3860px;
            font-family: Copperplate,Copperplate Gothic Light,fantasy;
        }

        input {
            position: absolute;
        }

        li {
            margin-top: 10px;
        }

        #reset {
            margin-top: 50px;
            margin-left: 60px;
            padding-top: 4px;
            padding-bottom: 4px;
            width: 100px;
            background-color: white;
            cursor: pointer;
            border: groove 2px gray;
            border-radius: 4px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
        }

        #key {
            position: absolute;
            top: 15px;
            left: 250px;
            border: groove 2px gray;
            background-image: url( images/key.png );
            background-repeat: no-repeat;
            min-width: 238px;
            min-height: 176px;
        }

        #instructions {
            position: absolute;
            top: 40px;
            left: 540px;
            color: white;
            font-size: 1.0em;
            min-width: 800px;
        }
        #instructions ul {
            min-width: 750px;
        }

        /* Find the coordinates of the middle of the icon, and subtract 17 from both values to get the left/top (x,y) values to use */
        #c0 {
            left: 294px;
            top: 259px;
        }
        #c1 {
            left: 762px;
            top: 225px;
        }
        #c2 {
            left: 837px;
            top: 215px;
        }
        #c3 {
            left: 929px;
            top: 256px;
        }
        #c4 {
            left: 981px;
            top: 254px;
        }
        #c5 {
            left: 1234px;
            top: 269px;
        }
        #c6 {
            left: 1337px;
            top: 296px;
        }
        #c7 {
            left: 179px;
            top: 2203px;
        }
        #c8 {
            left: 1475px;
            top: 287px;
        }
        #c9 {
            left: 1702px;
            top: 226px;
        }
        #c10 {
            left: 1345px;
            top: 372px;
        }
        #c11 {
            left: 1190px;
            top: 421px;
        }
        #c12 {
            left: 939px;
            top: 424px;
        }
        #c13 {
            left: 844px;
            top: 419px;
        }
        #c14 {
            left: 913px;
            top: 517px;
        }
        #c15 {
            left: 920px;
            top: 583px;
        }
        #c16 {
            left: 692px;
            top: 377px;
        }
        #c17 {
            left: 611px;
            top: 553px;
        }
        #c18 {
            left: 554px;
            top: 542px;
        }
        #c19 {
            left: 409px;
            top: 604px;
        }
        #c20 {
            left: 391px;
            top: 502px;
        }
        #c21 {
            left: 352px;
            top: 541px;
        }
        #c22 {
            left: 259px;
            top: 429px;
        }
        #c23 {
            left: 134px;
            top: 343px;
        }
        #c24 {
            left: 182px;
            top: 445px;
        }
        #c25 {
            left: 188px;
            top: 562px;
        }
        #c26 {
            left: 119px;
            top: 669px;
        }
        #c27 {
            left: 231px;
            top: 699px;
        }
        #c28 {
            left: 155px;
            top: 995px;
        }
        #c29 {
            left: 189px;
            top: 1006px;
        }
        #c30 {
            left: 664px;
            top: 980px;
        }
        /* ----------------------  need to subtract 17x17 below here  ------------------------ */
        #c31 {
            left: 909px;
            top: 983px;
        }
        #c32 {
            left: 1096px;
            top: 947px;
        }
        #c33 {
            left: 1094px;
            top: 928px;
        }
        #c34 {
            left: 1056px;
            top: 844px;
        }
        #c35 {
            left: 1099px;
            top: 586px;
        }
        #c36 {
            left: 1224px;
            top: 798px;
        }
        #c37 {
            left: 1227px;
            top: 852px;
        }
        #c38 {
            left: 1286px;
            top: 772px;
        }
        #c39 {
            left: 1357px;
            top: 585px;
        }
        #c40 {
            left: 1284px;
            top: 961px;
        }
        #c41 {
            left: 1309px;
            top: 984px;
        }
        #c42 {
            left: 1419px;
            top: 653px;
        }
        #c43 {
            left: 1515px;
            top: 651px;
        }
        #c44 {
            left: 1468px;
            top: 711px;
        }
        #c45 {
            left: 1646px;
            top: 657px;
        }
        #c46 {
            left: 1443px;
            top: 835px;
        }
        #c47 {
            left: 1478px;
            top: 858px;
        }
        #c48 {
            left: 1602px;
            top: 881px;
        }
        #c49 {
            left: 1467px;
            top: 905px;
        }
        #c50 {
            left: 1709px;
            top: 951px;
        }
        #c51 {
            left: 0px;
            top: 0px;
        }
        #c52 {
            left: 0px;
            top: 0px;
        }
        #c53 {
            left: 0px;
            top: 0px;
        }
        #c54 {
            left: 0px;
            top: 0px;
        }
        #c55 {
            left: 0px;
            top: 0px;
        }
        #c56 {
            left: 0px;
            top: 0px;
        }
        #c57 {
            left: 0px;
            top: 0px;
        }
        #c58 {
            left: 0px;
            top: 0px;
        }
        #c59 {
            left: 0px;
            top: 0px;
        }
        #c60 {
            left: 0px;
            top: 0px;
        }
        #c61 {
            left: 0px;
            top: 0px;
        }
        #c62 {
            left: 0px;
            top: 0px;
        }
        #c63 {
            left: 0px;
            top: 0px;
        }
        #c64 {
            left: 0px;
            top: 0px;
        }
        #c65 {
            left: 0px;
            top: 0px;
        }
        #c66 {
            left: 0px;
            top: 0px;
        }
        #c67 {
            left: 0px;
            top: 0px;
        }
        #c68 {
            left: 0px;
            top: 0px;
        }
        #c69 {
            left: 0px;
            top: 0px;
        }
        #c70 {
            left: 0px;
            top: 0px;
        }
        #c71 {
            left: 0px;
            top: 0px;
        }
        #c72 {
            left: 0px;
            top: 0px;
        }
        #c73 {
            left: 0px;
            top: 0px;
        }
        #c74 {
            left: 0px;
            top: 0px;
        }
        #c75 {
            left: 0px;
            top: 0px;
        }
        #c76 {
            left: 0px;
            top: 0px;
        }
        #c77 {
            left: 0px;
            top: 0px;
        }
        #c78 {
            left: 0px;
            top: 0px;
        }
        #c79 {
            left: 0px;
            top: 0px;
        }
        #c80 {
            left: 0px;
            top: 0px;
        }
        #c81 {
            left: 0px;
            top: 0px;
        }
        #c82 {
            left: 0px;
            top: 0px;
        }
        #c83 {
            left: 0px;
            top: 0px;
        }
        #c84 {
            left: 0px;
            top: 0px;
        }
        #c85 {
            left: 0px;
            top: 0px;
        }
        #c86 {
            left: 0px;
            top: 0px;
        }
        #c87 {
            left: 0px;
            top: 0px;
        }
        #c88 {
            left: 0px;
            top: 0px;
        }
        #c89 {
            left: 0px;
            top: 0px;
        }
        #c90 {
            left: 0px;
            top: 0px;
        }
        #c91 {
            left: 0px;
            top: 0px;
        }
        #c92 {
            left: 0px;
            top: 0px;
        }
        #c93 {
            left: 0px;
            top: 0px;
        }
        #c94 {
            left: 0px;
            top: 0px;
        }
        #c95 {
            left: 0px;
            top: 0px;
        }
        #c96 {
            left: 0px;
            top: 0px;
        }
        #c97 {
            left: 0px;
            top: 0px;
        }
        #c98 {
            left: 0px;
            top: 0px;
        }
        #c99 {
            left: 0px;
            top: 0px;
        }
        #c100 {
            left: 0px;
            top: 0px;
        }
        #c101 {
            left: 0px;
            top: 0px;
        }
        #c102 {
            left: 0px;
            top: 0px;
        }
        #c103 {
            left: 0px;
            top: 0px;
        }
        #c104 {
            left: 0px;
            top: 0px;
        }
        #c105 {
            left: 0px;
            top: 0px;
        }
        #c106 {
            left: 0px;
            top: 0px;
        }
        #c107 {
            left: 0px;
            top: 0px;
        }
        #c108 {
            left: 0px;
            top: 0px;
        }
        #c109 {
            left: 0px;
            top: 0px;
        }
        #c110 {
            left: 0px;
            top: 0px;
        }
        #c111 {
            left: 0px;
            top: 0px;
        }
        #c112 {
            left: 0px;
            top: 0px;
        }
        #c113 {
            left: 0px;
            top: 0px;
        }
        #c114 {
            left: 0px;
            top: 0px;
        }
        #c115 {
            left: 0px;
            top: 0px;
        }
        #c116 {
            left: 0px;
            top: 0px;
        }
        #c117 {
            left: 0px;
            top: 0px;
        }
        #c118 {
            left: 0px;
            top: 0px;
        }
        #c119 {
            left: 0px;
            top: 0px;
        }
        #c120 {
            left: 0px;
            top: 0px;
        }
        #c121 {
            left: 0px;
            top: 0px;
        }
        #c122 {
            left: 0px;
            top: 0px;
        }
        #c123 {
            left: 0px;
            top: 0px;
        }
        #c124 {
            left: 0px;
            top: 0px;
        }
        #c125 {
            left: 0px;
            top: 0px;
        }
        #c126 {
            left: 0px;
            top: 0px;
        }
        #c127 {
            left: 0px;
            top: 0px;
        }
        #c128 {
            left: 0px;
            top: 0px;
        }
        #c129 {
            left: 0px;
            top: 0px;
        }
        #c130 {
            left: 0px;
            top: 0px;
        }
        #c131 {
            left: 0px;
            top: 0px;
        }
        #c132 {
            left: 0px;
            top: 0px;
        }
        #c133 {
            left: 0px;
            top: 0px;
        }
        #c134 {
            left: 0px;
            top: 0px;
        }
        #c135 {
            left: 0px;
            top: 0px;
        }
        #c136 {
            left: 0px;
            top: 0px;
        }
        #c137 {
            left: 0px;
            top: 0px;
        }
        #c138 {
            left: 0px;
            top: 0px;
        }
        #c139 {
            left: 0px;
            top: 0px;
        }
        #c140 {
            left: 0px;
            top: 0px;
        }
        #c141 {
            left: 0px;
            top: 0px;
        }
        #c142 {
            left: 0px;
            top: 0px;
        }
        #c143 {
            left: 0px;
            top: 0px;
        }
        #c144 {
            left: 0px;
            top: 0px;
        }
        #c145 {
            left: 0px;
            top: 0px;
        }
        #c146 {
            left: 0px;
            top: 0px;
        }
        #c147 {
            left: 0px;
            top: 0px;
        }
        #c148 {
            left: 0px;
            top: 0px;
        }
        #c149 {
            left: 0px;
            top: 0px;
        }
        #c150 {
            left: 0px;
            top: 0px;
        }
        #c151 {
            left: 0px;
            top: 0px;
        }
        #c152 {
            left: 0px;
            top: 0px;
        }
        #c153 {
            left: 0px;
            top: 0px;
        }
        #c154 {
            left: 0px;
            top: 0px;
        }
        #c155 {
            left: 0px;
            top: 0px;
        }
        #c156 {
            left: 0px;
            top: 0px;
        }
        #c157 {
            left: 0px;
            top: 0px;
        }
        #c158 {
            left: 0px;
            top: 0px;
        }
        #c159 {
            left: 0px;
            top: 0px;
        }
        #c160 {
            left: 0px;
            top: 0px;
        }
        #c161 {
            left: 0px;
            top: 0px;
        }
        #c162 {
            left: 0px;
            top: 0px;
        }
        #c163 {
            left: 0px;
            top: 0px;
        }
        #c164 {
            left: 0px;
            top: 0px;
        }
        #c165 {
            left: 0px;
            top: 0px;
        }
        #c166 {
            left: 0px;
            top: 0px;
        }
        #c167 {
            left: 0px;
            top: 0px;
        }
        #c168 {
            left: 0px;
            top: 0px;
        }
        #c169 {
            left: 0px;
            top: 0px;
        }
        #c170 {
            left: 0px;
            top: 0px;
        }
        #c171 {
            left: 0px;
            top: 0px;
        }
        #c172 {
            left: 0px;
            top: 0px;
        }
        #c173 {
            left: 0px;
            top: 0px;
        }
        #c174 {
            left: 0px;
            top: 0px;
        }
        #c175 {
            left: 0px;
            top: 0px;
        }
        #c176 {
            left: 0px;
            top: 0px;
        }
        #c177 {
            left: 0px;
            top: 0px;
        }
        #c178 {
            left: 0px;
            top: 0px;
        }
        #c179 {
            left: 0px;
            top: 0px;
        }
        #c180 {
            left: 0px;
            top: 0px;
        }
        #c181 {
            left: 0px;
            top: 0px;
        }
        #c182 {
            left: 0px;
            top: 0px;
        }
        #c183 {
            left: 0px;
            top: 0px;
        }
        #c184 {
            left: 0px;
            top: 0px;
        }
        #c185 {
            left: 0px;
            top: 0px;
        }
        #c186 {
            left: 0px;
            top: 0px;
        }
        #c187 {
            left: 0px;
            top: 0px;
        }
        #c188 {
            left: 0px;
            top: 0px;
        }
        #c189 {
            left: 0px;
            top: 0px;
        }
        #c190 {
            left: 0px;
            top: 0px;
        }
        #c191 {
            left: 0px;
            top: 0px;
        }
        #c192 {
            left: 0px;
            top: 0px;
        }
        #c193 {
            left: 0px;
            top: 0px;
        }
        #c194 {
            left: 0px;
            top: 0px;
        }
        #c195 {
            left: 0px;
            top: 0px;
        }
        #c196 {
            left: 0px;
            top: 0px;
        }
        #c197 {
            left: 0px;
            top: 0px;
        }
        #c198 {
            left: 0px;
            top: 0px;
        }
        #c199 {
            left: 0px;
            top: 0px;
        }
        #c200 {
            left: 0px;
            top: 0px;
        }
        #c201 {
            left: 0px;
            top: 0px;
        }
        #c202 {
            left: 0px;
            top: 0px;
        }
        #c203 {
            left: 0px;
            top: 0px;
        }
        #c204 {
            left: 0px;
            top: 0px;
        }
        #c205 {
            left: 0px;
            top: 0px;
        }
        #c206 {
            left: 0px;
            top: 0px;
        }
        #c207 {
            left: 0px;
            top: 0px;
        }
        #c208 {
            left: 0px;
            top: 0px;
        }
        #c209 {
            left: 0px;
            top: 0px;
        }
        #c210 {
            left: 0px;
            top: 0px;
        }
        #c211 {
            left: 0px;
            top: 0px;
        }
        #c212 {
            left: 0px;
            top: 0px;
        }
        #c213 {
            left: 0px;
            top: 0px;
        }
        #c214 {
            left: 0px;
            top: 0px;
        }
        #c215 {
            left: 0px;
            top: 0px;
        }
        #c216 {
            left: 0px;
            top: 0px;
        }
        #c217 {
            left: 0px;
            top: 0px;
        }
        #c218 {
            left: 0px;
            top: 0px;
        }
    </style>
</head>
<body onload="initializePage();">
    <div id="reset" onclick="resetPage();">Reset</div>
    <div id="key"></div>
    <div id="instructions">
        <ul>
            <li>Click/tap on the chest's icon to mark it as collected.</li>
            <li>Click/tap on the Reset button to uncheck all chests.</li>
            <li>Progress is saved even if you close or reload the page.</li>
        </ul>
    </div>
</body>
</html>